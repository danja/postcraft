<!DOCTYPE html>
<html lang="en">

<head>
    <title>The Title</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- TODO make like this, place from manifest
    <link rel="stylesheet" href="css/fonts.css" type="text/css" />
    <link rel="stylesheet" href="css/grid-columns.css" type="text/css" />
    <link rel="stylesheet" href="css/style.css" type="text/css" />
    -->
    <link rel="stylesheet" href="layouts/mediocre/css/fonts.css" type="text/css" />
    <link rel="stylesheet" href="layouts/mediocre/css/grid-columns.css" type="text/css" />
    <link rel="stylesheet" href="layouts/mediocre/css/style.css" type="text/css" />

</head>

<body>
    <header id="main-header">
        <h1>
           Rawer
        </h1>
    </header>
    <div class="grid-container">
        <div class="main-grid-item directory">
            <p><strong>Under Construction</strong></p>
            <p><em>fixing entry permalinks is top of the to-dos</em></p>
            <!--
            <h2>directory</h2>
            <p>i cinque secoli, ma anche al passaggio alla videoimp</p>
            -->
        </div>
        <div class="main-grid-item articles">
            <!-- h2>articles</h2 -->
            <article>
                <!-- POST CONTENT TEMPLATE -->
<p class="post-title">
    <a href="https://danny.ayers.name/blog/librechat-notes.html">
        LibreChat Notes 2024-05-30
    </a>
</p>
<article class="post-content">
    <h1>LibreChat Notes 2024-05-30</h1>
<p><a href="https://www.librechat.ai/">LibreChat</a> is a front end for conversational AI services. It&#39;s design is not dissimilar to OpenAI&#39;s ChatGPT Web interface, but supports a wide range of services. It&#39;s open source, and can be run locally or wherever. They recommend using Docker, which is what I did. I&#39;m on Ubuntu here, they support all the usual desktop platforms.</p>
<p><strong>LibreChat is in active development, flux likely, so note the date above.</strong></p>
<p>For starters I wanted to use models from <a href="https://openai.com/index/openai-api/">OpenAI</a> and <a href="https://groq.com/">Groq</a>. API keys are needed - OpenAI&#39;s is pay-as-you-go, Groq is free but capped usage (and very fast).</p>
<p>Following the <a href="https://www.librechat.ai/docs/local/docker">Local Installation of LibreChat with Docker</a> will get the thing up and basically running with no fuss. But out of the box there are a few things that might not be immediately obvious.</p>
<p>For the OpenAI API key, first copy yours to clipboard then click the dropdown labeled <strong>OpenAI</strong> top-left of screen and click the gear icon to the right of OpenAI on the list. That&#39;s it <strong>done</strong>.</p>
<p>For <strong>Groq</strong> it&#39;s a little more involved.</p>
<p>I was going around in circles for quite a while until I saw that the instructions for <a href="https://www.librechat.ai/docs/configuration/librechat_yaml/setup">YAML Setup</a> appear <em>after</em> those for <a href="https://www.librechat.ai/docs/configuration/librechat_yaml/ai_endpoints">Custom AI Endpoints</a>. The former tells you a <code>docker-compose.override.yml</code> is needed (a new one from the code on that page worked for me). That points Docker to a <code>librechat.yaml</code> file.
Conveniently (for me) their <code>librechat.example.yaml</code> file has an entry for Groq, so I just copied &amp; renamed the whole file to <code>librechat.yaml</code>. It contains:</p>
<pre><code>  custom:
    # Groq Example
    - name: &#39;groq&#39;
      apiKey: &#39;${GROQ_API_KEY}&#39;
      baseURL: &#39;https://api.groq.com/openai/v1/&#39;
      ...
</code></pre>
<p><em>However</em>, I&#39;m no doubt missing something here, but it didn&#39;t pick up my environment variable set with:</p>
<pre><code>export GROQ_API_KEY=...
</code></pre>
<p>Probably not best practices, but this is on a local install, so I simply pasted my key instead of the <code>${GROQ_API_KEY}</code> bit above.
<strong>It works!!!</strong></p>
<p>I intend using this quite a lot, so I created a service file for systemd,</p>
<p>in <code>/etc/systemd/system/librechat.service</code> :</p>
<pre><code>[Unit]
Description=LibreChat
Requires=docker.service
After=docker.service

[Service]
WorkingDirectory=/home/danny/AI/LibreChat
ExecStart=/usr/bin/docker-compose up
ExecStop=/usr/bin/docker-compose down
Restart=on-failure

[Install]
WantedBy=multi-user.target
</code></pre>
<p><em>Adjust paths to taste</em></p>
<p>I always get confused about the order of these, it&#39;s something like:</p>
<pre><code>sudo systemctl daemon-reload
sudo systemctl enable librechat
sudo systemctl start librechat
</code></pre>
<p>If you run into probs, try all the usual update procedures for Docker, npm, etc. before tearing your hair out.</p>
<p>I&#39;ll be trying some other services soon (I see they have support for Ollama, so that&#39;s definitely in my queue). If there&#39;s anything useful to share I&#39;ll add it here.</p>

</article>
<em>2024-05-30</em><!-- POST CONTENT TEMPLATE -->
<p class="post-title">
    <a href="https://danny.ayers.name/blog/2024-05-30.html">
        Good Things Come in Threes
    </a>
</p>
<article class="post-content">
    <h1>Good Things Come in Threes</h1>
<p>I had to be up unnaturally early (for me) this morning, Mari giving me a lift for a blood test. So I didn&#39;t have a coffee until after. Wouldn&#39;t usually have been a good start to the day, but the clean-enough jeans I found to wear had â‚¬30 in the pocket. No idea when from.
Then when she dropped me back I noticed some new flowers on the balcony (photo here if I get around to it). Two good things.
I totally reject the stupid supernatural nonsense about bad things coming in threes, but today I&#39;m open to the notion of a third good thing. Even a 4th or 5th. Bring it on.</p>
<p>So many distractions, my head is a bit scrambled. But fortunately it&#39;s pretty clear what the next few things I need to do are, and all <em>should</em> be straightforward, procedural.</p>
<h2>Plan</h2>
<ol>
<li><p>Server rebuild bits</p>
</li>
<li><p>#FOAFRetrospective stuff</p>
</li>
<li><p>Bookmark store</p>
</li>
<li><p>Write about aligning projects</p>
</li>
<li><p>No.7 stuff</p>
</li>
<li><p>#Groq on #LibreChat</p>
</li>
<li><p>Family email</p>
</li>
</ol>
<p>I&#39;ve been procrastinating about server admin because I had the tedious job of decommissioning the old server to do before anything else. But that&#39;s now done I can look forward. 1-3 above are very intertwingled, and 4. is about jotting down thoughts on how best to manage tasks when there are common demands across projects. 5. is actually highest priority, but I&#39;ll be better able to deal with those things after a bit of dopamine from 1-4.</p>
<p>A meta-project in all this is facilitating the capture of any useful information. This blog setup was must-have numero uno, a consistent place to capture notes, under my control, with maximal potential for reuse. The next thing I need is a place to store links. I&#39;ve been here before, several times. It seems a no-brainer to use a <a href="https://en.wikipedia.org/wiki/SPARQL">SPARQL</a> store.</p>
<p>Oops, I forgot 6. That shouldn&#39;t take long, worth getting out of the way, it will hopefully help with the other things.</p>
<p>I&#39;ve got LibreChat running locally with Docker Compose, it&#39;s connecting to OpenAI&#39;s GPT4o API fine. But that was ready to go out of the box (just add an API key). Groq appears in LibreChat&#39;s list of potential services, but isn&#39;t yet showing up in the UI.</p>
<p><strong>This is exactly what I don&#39;t like about Docker!</strong></p>
<p>Ok, I can&#39;t contradict any of the very strong arguments in favour of using containers and suchlike. But there&#39;s no denying it&#39;s adding an additional component to the stack/system/process. I&#39;m inexperienced with it - for example, right now I&#39;m not clear about where and when LibreChat&#39;s config &amp; build files are consumed. There&#39;s a <code>.env</code> and a</p>

</article>
<em>2024-05-30</em><!-- POST CONTENT TEMPLATE -->
<p class="post-title">
    <a href="https://danny.ayers.name/blog/2024-05-29.html">
        Calm
    </a>
</p>
<article class="post-content">
    <h1>Calm</h1>
<p>I woke up calm and rested after a good night&#39;s sleep. Had about an hour doing odds &amp; end. All good. Then a video call from my mother, generally all ok but she promptly stressed me out. Headache, and the <em>No.7 insurance</em> thing has changed in my head from being a straightforward process to a <em>Big Difficult Thing</em> (nothing has changed in reality).</p>
<p>I needed to get data from the old server so I could kill it off before the end of the month (so as not to pay for it again). Done.</p>
<p>I also wanted to have something in place as a default AI assistant for <em>all the things</em>. I was using ChatGPT4, but hadn&#39;t subscribed for a couple of months ($ flow). <a href="https://groq.com/">Groq</a> was a very good stand-in, but their free offerings didn&#39;t seem any use for managing per-task/project conversations. I started setting up <a href="https://www.librechat.ai/">LibreChat</a> the other day, the plan being to to use it as a front end to <em>whatever</em>.</p>
<p>So many distractions, and I wanted to try out ChatGPT4o anyway, so I signed up there again.</p>
<p>Just now I had another quick look at #LibreChat - the Docker-based local install had worked nicely, I just had to add my API key for OpenAI to get that working.</p>
<p>Might as well have that starting on boot on this machine. With a little help from GitHub #Copilot (I have a sub there) I got a systemd service file set up.</p>
<pre><code>[Unit]
Description=LibreChat
Requires=docker.service
After=docker.service

[Service]
WorkingDirectory=/home/danny/AI/LibreChat
ExecStart=/usr/bin/docker-compose up
ExecStop=/usr/bin/docker-compose down
Restart=on-failure

[Install]
WantedBy=multi-user.target
</code></pre>
<p>Hmm. It didn&#39;t work. Copilot to the rescue :</p>
<pre><code>sudo systemctl enable librechat
</code></pre>
<p>Further probs. I did a load of updating things, still no joy. Then I wondered about a flag Copilot had given me : <code>ExecStart=/usr/bin/docker-compose up -d</code>. That appears to have worked! Educated guesswork that should have started sooner with distrusting AI.</p>
<h2>Plan</h2>
<p>carried over:</p>
<ol>
<li><del>Server decommissioning</del></li>
<li>#FOAFRetrospective stuff</li>
<li>No.7 garden</li>
<li><del>AI assistant</del> - good enough for now</li>
</ol>
<ul>
<li><p>No.7 ballcock</p>
</li>
<li><p>Nigel pressie - little placeholder ordered</p>
</li>
<li><p>draft contract for No.7</p>
</li>
<li><p>check insurance for No.7</p>
</li>
<li><p>Groq on LibreChat</p>
</li>
<li><p>remove _.md</p>
</li>
<li><p>articles for #Transmissions</p>
</li>
<li><p>Service.execute(message)</p>
</li>
<li><p>project alignment Article</p>
</li>
</ul>
<hr>
<h3>FOAF Retrospective</h3>
<p>danbri&#39;s last message about it:</p>
<blockquote>
<p>I think for foaf collecting raw materials is key
Like the most interesting or impactful things that ever used it
Or ongojng use in linkeddata datasets
Skos is also kind of needing the same but is probably another story</p>
</blockquote>

</article>
<em>2024-05-30</em><!-- POST CONTENT TEMPLATE -->
<p class="post-title">
    <a href="https://danny.ayers.name/blog/2024-05-28.html">
        Cough to Sneeze
    </a>
</p>
<article class="post-content">
    <h1>Cough to Sneeze</h1>
<p>I seem to have got over the cough/cold I had. Head still a bit fuzzy, but after one good cough when I woke up, all seems fine. Now snuffling a bit with hay fever...</p>
<h2>Plan</h2>
<ul>
<li>Decommission server</li>
</ul>
<p>The Cranberries&#39; <a href="https://genius.com/The-cranberries-zombie-lyrics">Zombie</a></p>
<p>Ok, if I tweak find-big-files a little, I should be able to save some time:</p>
<pre><code>find ./ -type f -printf &#39;%s %p\n&#39; | sort -nr | head -30 | awk &#39;{print &quot;rm &quot; $2}&#39; &gt; bigfiles.sh
</code></pre>
<p>I&#39;ll manually check the script before running it in case it&#39;s picking up anything I want to keep.</p>
<p>Ok, sweet.</p>
<p>Now :</p>
<pre><code>tar -czvf server-decommission-2024-05_root.tar.gz /root
chmod 777
</code></pre>
<p>and locally:</p>
<pre><code>time scp danny@178.79.136.35:/zips/server-decommission-2024-05_root.tar.gz ./
</code></pre>
<p>oops
wrong dir - move to <code>/zips</code> and try again</p>
<p>hah, that was tiny.</p>
<p>Now, <code>/home</code> - doesn&#39;t have many big files, and most of those are in <code>.git</code> dirs. I&#39;ll just delete those.</p>
<pre><code>find ./ -type d -name &#39;.git&#39; &gt; gits.sh
...
tar -czvf server-decommission-2024-05_home.tar.gz /home
</code></pre>
<pre><code>time scp danny@178.79.136.35:/zips/server-decommission-2024-05_home.tar.gz ./
</code></pre>
<p><code>var</code> - virtually all big files were under <code>log</code>, <code>lib</code> or <code>cache</code>. I reckon I&#39;m safe in just deleting those.</p>
<pre><code>tar -czvf server-decommission-2024-05_var.tar.gz /var
</code></pre>
<p>Hmm. There was a lot under <code>/var/www/html</code> as expected. What I&#39;d forgotten about is all the <code>webdav</code> stuff for Joplin.</p>
<p>That&#39;s a pain, I want to reuse that, but I seem to remember Joplin having a weird format in its <code>.md</code> files.</p>
<pre><code>time scp danny@178.79.136.35:/zips/server-decommission-2024-05_var.tar.gz ./
</code></pre>

</article>
<em>2024-05-30</em><!-- POST CONTENT TEMPLATE -->
<p class="post-title">
    <a href="https://danny.ayers.name/blog/2024-05-26.html">
        Slow Sunday
    </a>
</p>
<article class="post-content">
    <h1>Slow Sunday</h1>
<p>This post started as <em>Tired Saturday</em> :</p>
<blockquote>
<p>Very late night last night (trying to fix a tv), very late start today.</p>
</blockquote>
<p>I&#39;ve developed a cough. Sean, Mari&#39;s Irish friend brought it, Mari got it in the week, now me. Annoying.</p>
<p>Sunday, so I won&#39;t feel bad if I don&#39;t get much done today.</p>
<h2>Plan</h2>
<ol>
<li>Server decommissioning</li>
<li>#FOAFRetrospective stuff</li>
<li>No.7 garden</li>
<li>AI assistant</li>
</ol>
<h3>FOAF Retrospective</h3>
<p>danbri&#39;s last message about it:</p>
<blockquote>
<p>I think for foaf collecting raw materials is key
Like the most interesting or impactful things that ever used it
Or ongojng use in linkeddata datasets
Skos is also kind of needing the same but is probably another story</p>
</blockquote>
<hr>
<h3>Server Decommissioning</h3>
<p>Previous virtual server on Linode that go compromised. I need to download copies of anything that might potentially be useful.</p>
<p>But the server is in a state of disarray, I can&#39;t remember what&#39;s where. I&#39;ll start by looking at the root directory:</p>
<pre><code>danny@localhost:~$ ls /
bin                boot  etc   lib    lib64              libx32      media  opt   root  sbin                snap  sys  usr
bin.usr-is-merged  dev   home  lib32  lib.usr-is-merged  lost+found  mnt    proc  run   sbin.usr-is-merged  srv   tmp  var
</code></pre>
<p>Ok, I guess I should get (most of) :</p>
<pre><code>$du -sh /root
</code></pre>
<ul>
<li><code>/etc</code> - 2.4G</li>
<li><code>/root</code> - 1.9G</li>
<li><code>/home</code> - 3.5G</li>
<li><code>/var</code> - 12GB</li>
</ul>
<p>Not as big as I expected, but still a pain on this slow connection.</p>
<p>Find my <em>find big files</em> script...</p>
<pre><code>#!/bin/bash
find ./ -type f -printf &#39;%s %p\n&#39; | sort -nr | head -30
</code></pre>
<p>Ah. Now I see why <code>/etc</code> is that size. Lots of big files for #Fuseki DBs. I&#39;d better get all that dir.</p>
<p><code>/root</code> has a lot of big junk. I&#39;ll get rid of some of that before getting the dir.</p>
<p><code>/home</code> - similar. A lot under <code>.git</code> subdirs that should be safe to ditch - similar stuff will already be local and on GitHub</p>
<p><code>/var</code> - hah, of course - lots of big log files</p>
<p>Now what&#39;s the best tar/gzip command...ask ChatGPT...</p>
<pre><code>tar -czvf root_backup.tar.gz /root
</code></pre>
<p>(It also had suggestions including <code>scp</code>, but today I&#39;ll do it step-by-step)</p>
<p>Ok, that actually looks familiar. So right away I&#39;ll do :</p>
<pre><code>mkdir /zips
cd /zips
time tar -czvf server-decommission-2024-05_etc.tar.gz /etc
...
real	1m54.447s
user	1m36.847s
sys	0m12.939s
</code></pre>
<p>File size is 364M, that&#39;s grand.</p>
<p>Now to copy it down. <code>scp</code>, but I think it&#39;s have to be as non-root user. Ok,</p>
<pre><code>chmod -R 777 ./
</code></pre>
<p>Overkill, who cares.
Locally,</p>
<pre><code>mkdir server-decommission_2024-05
cd server-decommission_2024-05

time scp danny@178.79.136.35:/zips/server-decommission-2024-05_etc.tar.gz ./
</code></pre>
<p>Looks to be working. Dogwalk time.</p>
<pre><code>server-decommission-2024-05_etc.tar.gz        100%  363MB 841.7KB/s   07:22

real	7m41.482s
user	0m4.618s
sys	0m7.892s
</code></pre>
<p>Good-good.
Next, check that&#39;s got reasonable contents. Next, clean those other dirs a bit and repeat for them.</p>

</article>
<em>2024-05-30</em>
            </article>
        </div>
        <div class="main-grid-item about">
            <!--
            <h2>About</h2>
            
            -->
        </div>
    </div>
</body>

</html>