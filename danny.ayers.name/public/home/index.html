<!DOCTYPE html>
<html lang="en">

<head>
    <title>The Title</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- TODO make like this, place from manifest
    <link rel="stylesheet" href="css/fonts.css" type="text/css" />
    <link rel="stylesheet" href="css/grid-columns.css" type="text/css" />
    <link rel="stylesheet" href="css/style.css" type="text/css" />
    -->
    <link rel="stylesheet" href="css/fonts.css" type="text/css" />
    <link rel="stylesheet" href="css/grid-columns.css" type="text/css" />
    <link rel="stylesheet" href="css/style.css" type="text/css" />

</head>

<body>
    <header id="main-header">
        <h1>
           Rawer
        </h1>
    </header>
    <div class="grid-container">
        <div class="main-grid-item directory">
            <p><strong>Under Construction</strong></p>
            <p><em>fixing entry permalinks is top of the to-dos</em></p>
            <!--
            <h2>directory</h2>
            <p>i cinque secoli, ma anche al passaggio alla videoimp</p>
            -->
        </div>
        <div class="main-grid-item articles">
            <!-- h2>articles</h2 -->
            <article>
                <!-- POST CONTENT TEMPLATE -->
<p class="post-title">
    <a href="https://danny.ayers.name/home/2024-07-11.html">
        Another Groundhog Day
    </a>
</p>
<article class="post-content">
    <h1>Another Groundhog Day</h1>
<p><strong>FOAF vid</strong> for fun, after the following:</p>
<p>Continuing from yesterday - #Transmissions and #Postcraft</p>
<p>Listening to <a href="https://www.youtube.com/watch?v=w_OBfKA-0BY">this old raver</a></p>

</article>
<em>2024-07-11</em><!-- POST CONTENT TEMPLATE -->
<p class="post-title">
    <a href="https://danny.ayers.name/home/2024-07-08.html">
        WTFs
    </a>
</p>
<article class="post-content">
    <h1>WTFs</h1>
<ul>
<li>danbri : <a href="https://codepen.io/danbri/full/xxoxqOp">https://codepen.io/danbri/full/xxoxqOp</a></li>
</ul>
<p><strong>FOAF vid</strong> for fun, after the following:</p>
<p>Continuing from yesterday - #Transmissions and #Postcraft</p>
<p>Funny, you know how legacy code can be mystifying? My initial setup in Transmissions used messages/process calls of the form <code>(data, context)</code>, where <code>data</code> would be a string, <code>context</code> a <code>{key:value, ... }</code> dictionary. Keep it simple...
But I subsequently realised that it&#39;d be better with the dictionary alone (not least because the <em>actual</em> context was defined elsewhere). So I changed the signature to <code>(context)</code>, any string data could go in as something like <code>context.data</code>.</p>
<p>Yeah. I should do <code>s/context/message</code>.</p>
<p><img src="media/images/replace-all.png" alt="replace all"></p>
<p><strong>need to move entry-content-cache somewhere better</strong></p>
<p>Miracle. That only broke one class, which was a 10 min fix.</p>
<p>I do need to go through <em>everything</em>, fix any other issues I&#39;ve introduced, tidy up, add tests &amp; docs.
Docs especially - I&#39;ve only got GitHub Copilot to help me out for a few more days.</p>
<hr>
<p><a href="https://www.librechat.ai/">https://www.librechat.ai/</a> - rebuild, how?</p>
<hr>
<h3><a href="https://ldap-account-manager.org/lamcms/">LDAP Account Manager</a></h3>
<p>to try. Has downloads but is also Ubuntu repos, so:</p>
<pre><code>sudo apt install ldap-account-manager
</code></pre>
<p><strong>Stop!</strong> - ew, it has PHP dependencies. I&#39;ll leave that for now.</p>
<pre><code>There&#39;s also a `ldap-account-manager-lamda` package:

&gt; Lamdaemon is part of LDAP Account Manager. This package
&gt; needs to be installed on the server where the home directories
&gt; reside and/or quotas should be managed.

---

Closing tabs, these are notes-to-self:

- https://github.com/authelia/authelia - The Single Sign-On Multi-Factor portal for web apps
- https://www.authelia.com/configuration/first-factor/ldap/ - Authelia LDAP

- https://www.w3.org/DesignIssues/Overview.html - for notes somewhere
- https://simonwillison.net/ - check layout
- https://github.com/yjs/yjs - use somewhere
- https://qlever.cs.uni-freiburg.de/wikidata - fast SPARQL engine
- https://docs.oracle.com/javase/jndi/tutorial/ldap/security/auth.html - LDAP auth methods

* https://docs.ejabberd.im/admin/configuration/ldap/#ldap-connection - ejabberd LDAP
- https://www.surfrock66.com/my-experience-guide-setting-up-openldap-for-pc-webapp-authentication-on-ubuntu-20-04/ - OpenLDAP setup
`
</code></pre>

</article>
<em>2024-07-11</em><!-- POST CONTENT TEMPLATE -->
<p class="post-title">
    <a href="https://danny.ayers.name/home/2024-07-07.html">
        Mostly Transmissions Today
    </a>
</p>
<article class="post-content">
    <h1>Mostly Transmissions Today</h1>
<p>Main things:</p>
<ol start="0">
<li>AI support</li>
<li>Refactor #Transmissions</li>
<li>Tidy up #Postcraft</li>
<li>FOAF video recovery</li>
</ol>
<h2>AI Support</h2>
<p>The other day I had a play with <a href="https://www.librechat.ai/">LibreChat</a>, which is a chatbot frontend that can be connected to a range of AI services. I got it running on my local machine, have done a <code>git pull</code> and have been adding services.</p>
<p><a href="">notes from the other day</a></p>
<p>From <a href="https://www.librechat.ai/docs/configuration/librechat_yaml/ai_endpoints">Known Endpoints</a> in <code>librechat.example.yaml</code> :</p>
<ul>
<li><a href="https://anyscale.com/">AnyScale</a></li>
<li><a href="https://apipie.ai/">API Pie</a></li>
<li><a href="https://fireworks.ai/">Fireworks</a></li>
<li><a href="https://groq.ai/">GROQ</a></li>
<li><a href="https://huggingface.co/">HuggingFace</a></li>
<li><a href="https://mistral.ai/">Mistral AI</a></li>
<li><a href="https://openrouter.ai/">OpenRouter</a></li>
<li><a href="https://perplexity.ai/">Perplexity</a> - requires payment first</li>
<li><a href="https://shuttleai.app/">Shuttle AI</a></li>
<li><a href="https://api.together.ai/">Together AI</a></li>
</ul>
<p>I&#39;ve added API keys for those to my <code>.env</code>. (Don&#39;t forget to include it in the <code>.gitignore</code> before committing!)</p>
<p>Listed in the <a href="https://www.librechat.ai/docs/configuration/librechat_yaml/ai_endpoints">endpoints</a> but weren&#39;t in the sample <code>.env</code>, I&#39;ve also added:</p>
<ul>
<li><a href="https://cohere.com">Cohere</a></li>
<li><a href="https://databricks.com">DataBricks</a> - wasn&#39;t obvious where to get the API key, left for now</li>
</ul>
<p><em>to be continued...</em></p>
<p>It also supports RAG, and somewhere it mentions using HuggingFace for embeddings. So also in my <code>.env</code>:</p>
<pre><code>RAG_API_URL=http://host.docker.internal:8000
EMBEDDINGS_PROVIDER=huggingface
HF_TOKEN=...
</code></pre>
<pre><code>danny@danny-desktop:~/AI/LibreChat$ docker compose ls
danny@danny-desktop:~/AI/LibreChat$ docker compose up -d
</code></pre>
<p>Hmm. It doesn&#39;t appear to be picking up the new <code>.env</code> settings, even after <code>docker compose </code>. Try again later.</p>
<h2>Tidy up Postcraft</h2>
<p>The <a href="https://github.com/danja/transmissions">Transmissions</a> refactoring might take a while, and will no doubt break the setup for <a href="https://github.com/danja/postcraft">Postcraft</a> in the interim. So I&#39;ll do a quick tidy up there first, publish the current material.</p>
<p>ok, <code>2024-04-27_postcraft-flow.md</code> says:</p>
<pre><code>./run postcraft /home/danny/HKMS/postcraft/danny.ayers.name
</code></pre>
<p>I guess that&#39;ll be from <code>danny@danny-desktop:~/HKMS/transmissions$</code> - the terminal I have in #Cursor.</p>
<p>Ok, that appears to have run ok. Stuff locally at <code>http://localhost/danny.ayers.name/public/blog/</code>
I&#39;ll push those changes, then do a quick check of <a href="https://danny.ayers.name/">https://danny.ayers.name/</a></p>
<p>It&#39;s there, but without the CSS.</p>
<pre><code>  &lt;link rel=&quot;stylesheet&quot; href=&quot;css/fonts.css&quot; type=&quot;text/css&quot; /&gt;
</code></pre>
<p><strong>Need more coffee!!</strong></p>
<p>Ok, so with :</p>
<pre><code>./run postcraft /home/danny/HKMS/postcraft/danny.ayers.name
</code></pre>
<p>it&#39;s picking up :</p>
<pre><code>/home/danny/HKMS/transmissions/src/applications/postcraft

./about.md
./services.ttl
./transmission.ttl
</code></pre>
<p>and then applying that to :</p>
<pre><code>/home/danny/HKMS/postcraft/danny.ayers.name/manifest.ttl
</code></pre>
<p>putting the result in :</p>
<pre><code>danny@danny-desktop:~/HKMS/postcraft/danny.ayers.name/public/blog$ ls
entries  index.html
</code></pre>
<p>I don&#39;t like <code>./blog</code> there, <code>./home</code> would be better.</p>
<p>what it needs to do but I clearly haven&#39;t set up yet is to copy some of this across :</p>
<pre><code>danny@danny-desktop:~/HKMS/postcraft/danny.ayers.name/layouts/mediocre$ ls
about.md  css  fonts  layout-sample.html  templates
</code></pre>
<p>So this is <em>delegation to the max</em>, but that&#39;s ok, intentional separation of concerns.</p>
<p>I forget what <strong>Transmissions services</strong> (in <code>transmissions/src/services/</code>) I&#39;ve got set up around <strong>copy</strong>, one might need to be tweaked/added.
It&#39;ll be easiest to run at the start of the pipeline, before things start forking.
That will take its config from <code>transmissions/src/applications/postcraft/services.ttl</code>. Which in turn (I think) should take its details from the <code>manifest.ttl</code> in the site directory.</p>
<p>I&#39;ll need to check what is in place already. While I&#39;m at it, I want to tweak the content folders a bit. New version in <a href="https://github.com/danja/postcraft/blob/main/docs/site-template.md">docs/site-template.md</a>.</p>
<p>Ok, so in <code>danny.ayers.name/manifest.ttl</code> I&#39;ve flipped <code>blog</code> to <code>home</code> and added :</p>
<pre><code># STYLES ETC
t:CSS a pc:StaticGroup ;
    pc:site &lt;https://danny.ayers.name&gt; ;
    fs:sourceDirectory &quot;layouts/mediocre/css&quot; ;
    fs:targetDirectory &quot;public/home/css&quot; .

... similar for fonts &amp; JS
</code></pre>
<p><strong>also need to clean dirs on rebuild</strong> - later</p>
<p>Although I&#39;ve got a <code>FileReader</code> and a <code>FileWriter</code>, I don&#39;t have a <code>FileCopy</code>. I&#39;ll add one to the services.</p>
<p>Shortly...</p>
<p>I&#39;ll put the config in place in <code>service.ttl</code> now, then implement it after a bit of Transmissions refactoring, after dogwalk.</p>
<p>Hmm. I can&#39;t remember how I did the delegaty bit. For now I&#39;ve put this in <code>services.ttl</code> as a placeholder :</p>
<pre><code>t:copyCSS a trm:FileCopy ;
        trm:key t:cssCopy .

... similar for fonts &amp; JS
</code></pre>
<p>Yay! I got the change from <code>execute(data, context)</code> to <code>execute(context)</code> etc. done and it&#39;s working with the <code>postcraft</code> application. I was dreading that. It may have broken some of the other services, but no biggy, I&#39;ll find out as I go along.</p>
<p>I guess I should also rename the <code>mill</code> dir to <code>engine</code> while I&#39;m at it. Done! That was surprisingly painless too.</p>
<p>So, <code>FileCopy</code> service. I also need a <code>FileRemove</code> service nearbly, so I might as well set that up too.</p>
<p>Prompt time.</p>
<p>Using @ServiceExample.js as a template, create @FileCopy.js The context object going into execute(context) will have <code>source</code> and <code>destination</code> keys. The <code>source</code> will be a path to a file or directory, the <code>destination</code> will be a path to a directory. If <code>source</code> is a file, it will be copied to the <code>destination</code> directory. If <code>source</code> is a directory, the directory and its contents will be copied recursively to the <code>destination</code> directory. Include appropriate error handling.</p>
<p>Using @ServiceExample.js as a template, create @FileRemove.js The context object going into execute(context) will have a <code>remove</code> key. This will be a path to a file or directory. If it is a file, that file will be deleted. If it is a directory, the directory&#39;s contents will be deleted recursively, but not the directory itself. Include appropriate error handling.</p>
<p>Ok, they&#39;re sketched out and I&#39;ve started a little application <code>file-copy-remove-test</code> to try them out.
Enough for today.</p>

</article>
<em>2024-07-11</em><!-- POST CONTENT TEMPLATE -->
<p class="post-title">
    <a href="https://danny.ayers.name/home/2024-07-05.html">
        TODAYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY AI setup, again
    </a>
</p>
<article class="post-content">
    <h1>TODAYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY AI setup, again</h1>
<p>This is still working towards <strong>hyperdata.it reboot</strong>, but I need a bit better AI support.</p>
<p><a href="https://www.librechat.ai/">LibreChat</a> is a front end to <em>any AI</em>. I installed it a few weeks ago, it seemed very good</p>
<p>previously is in LibreChat Notes 2024-05-30</p>
<p>5€ credit for <a href="https://mistral.ai/">Mistral</a>!</p>
<hr>
<p>@kvistgaard
Querying #GitHub with #SPARQL Anything
<a href="https://twitter.com/kvistgaard/status/1720078326449213725">https://twitter.com/kvistgaard/status/1720078326449213725</a></p>
<p>fuseki&#39;s browser-based admin interface uses the authentication to can see in the request headers below. I&#39;d like to allow a user authenticated this way to use other pages on the site https:/hyperdata.it, without having to log in and out again. How? Please check Fuseki docs and/or code to see how it is done there. The other server-side code uses nodejs (in es module style) and I believe the passport libs might be useful.</p>
<p>at <a href="https://fuseki.hyperdata.it/#/">https://fuseki.hyperdata.it/#/</a></p>
<pre><code>GET /$/server HTTP/1.1
Accept: application/json, text/plain, */*
Accept-Encoding: gzip, deflate, br, zstd
Accept-Language: en-US,en;q=0.8
Authorization: Basic c2VydmljZS1hZG1pbi11c2VyOnZibi12Ym4tMTIz
Cache-Control: no-cache
Connection: keep-alive
Cookie: JSESSIONID=node01s2l4xznid5ti1f2r6h5phj16v2.node0
Host: fuseki.hyperdata.it
Pragma: no-cache
Referer: https://fuseki.hyperdata.it/
Sec-Fetch-Dest: empty
Sec-Fetch-Mode: cors
Sec-Fetch-Site: same-origin
Sec-GPC: 1
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36
sec-ch-ua: &quot;Not/A)Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;126&quot;, &quot;Brave&quot;;v=&quot;126&quot;
sec-ch-ua-mobile: ?0
sec-ch-ua-platform: &quot;Linux&quot;
</code></pre>
<p>moving to <a href="https://fuseki.hyperdata.it/#/manage">https://fuseki.hyperdata.it/#/manage</a> :</p>
<pre><code>GET /$/server HTTP/1.1
Accept: application/json, text/plain, */*
Accept-Encoding: gzip, deflate, br, zstd
Accept-Language: en-US,en;q=0.8
Authorization: Basic c2VydmljZS1hZG1pbi11c2VyOnZibi12Ym4tMTIz
Cache-Control: no-cache
Connection: keep-alive
Cookie: JSESSIONID=node01s2l4xznid5ti1f2r6h5phj16v2.node0
Host: fuseki.hyperdata.it
Pragma: no-cache
Referer: https://fuseki.hyperdata.it/
Sec-Fetch-Dest: empty
Sec-Fetch-Mode: cors
Sec-Fetch-Site: same-origin
Sec-GPC: 1
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36
sec-ch-ua: &quot;Not/A)Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;126&quot;, &quot;Brave&quot;;v=&quot;126&quot;
sec-ch-ua-mobile: ?0
sec-ch-ua-platform: &quot;Linux&quot;
</code></pre>
<p>I want to use the following structure. Please advise on updating paths.</p>
<pre><code>packages/auth-test/
├── client/
│       ├── dashboard.html
│       ├── css/
│       │   └── styles.css
│       └── js/
│           └── dashboard.js
└── server/
    └── server.js
</code></pre>
<hr>
<p>earlier</p>
<h1>Back to Life</h1>
<p>A UK trip totally blew my momentum.</p>
<p><em>funny, GitHub Copilot in VS Code where I&#39;m typing just suggested &quot;I&#39;m back in Portugal now, and I&#39;ve got a few days to get back on track.&quot;</em></p>
<p><a href="https://www.youtube.com/watch?v=vXMdChlJa0s">Listening</a></p>
<p><strong>No.7 CONTRACT</strong></p>
<p>Zombie!</p>
<h3>FOAF</h3>
<ul>
<li>org a bit</li>
</ul>
<h3>Fuseki</h3>
<ul>
<li>auth etc.</li>
</ul>
<p>Publish workflow - webhook?</p>
<h3>Transmissions</h3>
<ul>
<li>HTTP hooks</li>
</ul>
<h3>Misc</h3>
<p>check firewall</p>
<p>Server requirements list</p>
<p>qlever</p>
<p>placeholder articles</p>

</article>
<em>2024-07-11</em><!-- POST CONTENT TEMPLATE -->
<p class="post-title">
    <a href="https://danny.ayers.name/home/2024-07-04.html">
        hyperdata.it reboot
    </a>
</p>
<article class="post-content">
    <h1>hyperdata.it reboot</h1>
<p>I believe I&#39;ve got the #LDAP and #Fuseki setup working. I need it for <em>other stuff</em> but for sanity checking and to <strong>to sort out my TODOs</strong> it makes sense to line up some of the old hyperdata.it bits against it.</p>
<p>I also need to tidy up this blog setup a bit, I left it hanging somewhat.</p>
<h2>Plan</h2>
<ol>
<li>[*] set up monorepo for farelo, trellis...</li>
<li>[*] flip desktop localhost Apache to nginx, configure like server</li>
<li>[*] copy relevant bits of trellis to monorepo</li>
<li><input disabled="" type="checkbox"> add auth against remote Fuseki</li>
<li><input disabled="" type="checkbox"> setup Transmissions to deploy</li>
</ol>
<p><em>hmm, numbered markdown todos don&#39;t seem so good - correct syntax?</em></p>
<h3>1. Monorepo</h3>
<p>I got ChatGPT4o to help.</p>
<ul>
<li><a href="https://github.com/danja/hyperdata">https://github.com/danja/hyperdata</a></li>
<li>local : <code>/home/danny/hyperdata</code></li>
<li>server : <code>/home/github/hyperdata</code></li>
</ul>
<pre><code>http://localhost/APPS/
danny@danny-desktop:/var/www/html/APPS$
lrwxrwxrwx 1 danny danny   44 Jul  4 15:14 common -&gt; /home/danny/hyperdata/packages/common/public
lrwxrwxrwx 1 danny danny   45 Jul  4 15:14 trellis -&gt; /home/danny/hyperdata/packages/trellis/public

https://hyperdata.it/apps/
root@hyperdata:/var/www/html/apps# ln -s /home/github/hyperdata/packages/common/public common
root@hyperdata:/var/www/html/apps# ln -s /home/github/hyperdata/packages/trellis/public trellis
</code></pre>
<p>hmm, 404</p>
<h5>nano /etc/nginx/sites-available/hyperdata.it.conf</h5>
<pre><code>    location / {
        root /home/www/hyperdata.it;
        index index.html index.htm index.ttl;
                autoindex on;
    }

Ok,

ln -s /var/www/html/apps /home/www/hyperdata.it/apps
</code></pre>
<h3>2. Apache to nginx</h3>
<pre><code>
systemctl list-unit-files | grep enabled will list all enabled ones.

If you want which ones are currently running, you need systemctl | grep running.

sudo systemctl stop apache2
sudo systemctl disable apache2
</code></pre>
<h4>/etc/nginx/sites-available/default</h4>
<pre><code>
server {
listen 80;
server_name localhost;

    location / {
        root /var/www/html;
        index index.html index.htm index.ttl;
        autoindex on;
    }

}
</code></pre>
<pre><code>
sudo systemctl reload nginx
sudo tail -f /var/log/nginx/error.log
</code></pre>
<p>So far so good.</p>
<pre><code>
danny@danny-desktop:/var/www/html$ ls -al **HKMS**
lrwxrwxrwx 1 danny danny 26 Jul 18 2023 **HKMS** -&gt; /home/danny/HKMS/HKMS/src/
</code></pre>
<h3>Prompts for AI.</h3>
<p>I want to create a monorepo for a set of related applications that share some common code. The code will be browser-based HTML, CSS and vanilla JS and nodejs using ES modules. I wish to use the following tools:</p>
<ul>
<li>npm</li>
<li>jsdoc</li>
<li>chai</li>
<li>jasmine
The first three apps that will appear in the monorepo are called &#39;farelo&#39;, &#39;trellis&#39; and &#39;strandz&#39;. Can you advise on how to set up the monorepo and the tools for these apps, with a good dir structure, following best practices?</li>
</ul>
<hr>
<pre><code>
</code></pre>

</article>
<em>2024-07-11</em>
            </article>
        </div>
        <div class="main-grid-item about">
            <!--
            <h2>About</h2>
            
            -->
        </div>
    </div>
</body>

</html>